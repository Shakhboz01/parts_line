<div class="container my-5">
  <div class="card shadow-lg">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h3 class="card-title font-weight-bold">Поставщики</h3>
      <%= link_to 'Добавить новый', new_provider_path, class: "btn btn-success min-width-btn" %>
    </div>

    <div class="card-body">
      <table class="table table-hover table-bordered table-striped">
        <thead>
          <tr>
            <th><%= sort_link q, :id, 'ID' %></th>
            <th><%= sort_link q, :name, 'имя' %></th>
            <th><%= sort_link q, :phone_number, 'номер телефона' %></th>
            <th>наш долг</th>
            <th><%= sort_link q, :comment, 'Коммент' %></th>
            <th><%= sort_link q, :created_at, 'Оформлено в' %></th>
            <th colspan="3"></th>
          </tr>
        </thead>
        <tbody>
          <% providers.each do |provider| %>
            <tr class="<%= active_tr(provider.active) %>">
              <td><%= provider.id %></td>
              <td><%= provider.name %></td>
              <td><%= provider.phone_number %></td>
              <td><%= calculate_debt(provider) %></td>
              <td><%= provider.comment %></td>
              <td><%= strf_datetime(provider.created_at) %></td>
              <td>
                <%= clink_to 'Редактировать', edit_provider_path(provider), 'fa-edit' %>
                <%= clink_to 'История прихода товаров от поставщика', delivery_from_counterparties_path(q: {provider_id_eq: provider.id}), 'fa-history' %>
                <% if provider.active %>
                  <%= clink_to 'Деактивировать', toggle_active_provider_path(provider), 'fa-ban', :post %>
                <% else %>
                  <%= clink_to 'Активировать', toggle_active_provider_path(provider), 'fa-chart-line', :post %>
                <% end %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
    <%= paginate providers %>
  </div>
</div>
